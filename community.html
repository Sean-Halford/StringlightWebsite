<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stringlight ç¤¾åŒº - è¿æ¥å…¨çƒåˆ›å®¢</title>
    <link rel="icon" href="images/logo32x32.png" type="image/png">
    <style>
        /* --- 1. ä¿®å¤é¡µé¢è·³åŠ¨ï¼šå¼ºåˆ¶æ˜¾ç¤ºæ»šåŠ¨æ¡ --- */
        html {
            overflow-y: scroll; /* å…³é”®ï¼šé˜²æ­¢ä¸åŒé¡µé¢å› æ»šåŠ¨æ¡æœ‰æ— è€Œå¯¼è‡´çš„å·¦å³ä½ç§» */
        }

        /* --- ç»§æ‰¿ index.html çš„åŸºç¡€å˜é‡ä¸æ ·å¼ --- */
        :root {
            --primary-color: #ffb700;
            --secondary-color: #2c2c63;
            --accent-green: #33db00;
            --text-color: #4b5056;
            --light-bg: #f4f6f8;
            --white: #ffffff;
            --border-color: #e2e4e7;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif; color: var(--text-color); line-height: 1.6; background-color: var(--light-bg); }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        ul { list-style: none; }

        /* --- å¯¼èˆªæ æ ·å¼ (ä¿æŒä¸ Index å®Œå…¨ä¸€è‡´) --- */
        header {
            background-color: var(--white);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: 800;
            color: var(--secondary-color);
            display: flex;
            align-items: center;
            cursor: pointer; /* è®© Logo çœ‹èµ·æ¥å¯ç‚¹å‡» */
        }
        .logo span { color: var(--primary-color); }
        
        .nav-logo-img { 
            height: 35px; 
            width: auto; 
            margin-right: 10px; 
            display: block; 
            object-fit: contain; 
        }

        .nav-links { display: flex; gap: 30px; align-items: center; }
        .nav-links a { font-weight: 600; font-size: 16px; color: var(--secondary-color); display: flex; align-items: center; gap: 5px; }
        .nav-links a:hover { color: var(--primary-color); }
        .nav-links a.active { color: var(--primary-color); }

        .cta-btn {
            background-color: var(--accent-green);
            color: white !important;
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: bold;
            border: none;
            cursor: pointer;
        }
        .cta-btn:hover { background-color: #2ab800; transform: translateY(-2px); }

        /* ç™»å½•æŒ‰é’®æ ·å¼ */
        .login-btn {
            cursor: pointer;
            border: 2px solid var(--secondary-color);
            padding: 6px 18px;
            border-radius: 50px;
            font-weight: bold;
        }
        .login-btn:hover {
            background-color: var(--secondary-color);
            color: white !important;
        }

        /* --- Community Hero Section --- */
        .comm-hero {
            margin-top: 70px; /* é¿å¼€å¯¼èˆªæ  */
            padding: 80px 20px 80px;
            text-align: center;
            background: linear-gradient(135deg, var(--secondary-color) 0%, #1a1a3d 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .comm-hero h1 { font-size: 3rem; margin-bottom: 20px; }
        .comm-hero p { font-size: 1.2rem; margin-bottom: 30px; opacity: 0.9; max-width: 800px; margin-left: auto; margin-right: auto; }
        
        /* --- Forum Container Layout --- */
        .forum-container {
            max-width: 1200px;
            margin: 60px auto 80px;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 30px;
        }

        /* Sidebar Styling */
        .forum-sidebar { background: rgba(255,255,255,0.8); padding: 20px; border-radius: 10px; height: fit-content; }
        .sidebar-title { font-size: 1.1rem; font-weight: 700; color: var(--secondary-color); margin-bottom: 15px; border-bottom: 2px solid var(--border-color); padding-bottom: 10px; }
        .category-list li { margin-bottom: 10px; }
        .category-list a { display: flex; justify-content: space-between; padding: 8px 10px; border-radius: 6px; color: var(--text-color); font-weight: 500; }
        .category-list a:hover { background-color: #eee; color: var(--secondary-color); }
        .category-list a.active { background-color: var(--secondary-color); color: white; }
        .cat-count { background: #ddd; font-size: 0.8rem; padding: 2px 8px; border-radius: 10px; color: #666; }

        /* Main Content Styling */
        .forum-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        
        /* Thread Card */
        .thread-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            transition: 0.2s;
            border: 1px solid var(--border-color);
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }

        .thread-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.05); border-color: var(--primary-color); }
        
        .user-avatar-small { width: 45px; height: 45px; background: #ddd; border-radius: 50%; margin-right: 20px; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #666; flex-shrink: 0; }
        .thread-info { flex: 1; }
        .thread-title { font-size: 1.2rem; font-weight: 700; color: var(--secondary-color); display: block; margin-bottom: 5px; }
        .thread-meta { font-size: 0.9rem; color: #999; }
        .thread-tag { display: inline-block; font-size: 0.8rem; padding: 2px 8px; border-radius: 4px; margin-right: 10px; font-weight: 600; }
        
        /* æ ‡ç­¾é¢œè‰² */
        .tag-help { background: #ffeebb; color: #d48806; }
        .tag-showcase { background: #d9f7be; color: #389e0d; }
        .tag-official { background: #e6f7ff; color: #096dd9; }
        .tag-new { background: #ffccc7; color: #cf1322; }

        .thread-stats { text-align: center; min-width: 80px; color: #888; font-size: 0.9rem; }
        .stat-num { font-weight: bold; color: var(--secondary-color); display: block; font-size: 1.1rem; }

        /* --- Global Movement Section --- */
        .global-section {
            text-align: center;
            padding: 60px 20px;
            background-color: white;
            margin-bottom: 60px;
        }
        .global-section h2 { color: var(--secondary-color); font-size: 2rem; margin-bottom: 20px; }
        
        /* å¼¹çª—é€šç”¨æ ·å¼ */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-content { background-color: var(--white); padding: 40px; border-radius: 20px; width: 90%; max-width: 500px; position: relative; box-shadow: 0 15px 50px rgba(0,0,0,0.2); }
        .close-modal { position: absolute; top: 15px; right: 20px; font-size: 28px; cursor: pointer; color: #aaa; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 600; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 12px; border: 2px solid #eee; border-radius: 8px; outline:none; }
        .form-group textarea { resize: vertical; height: 100px; }
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus { border-color: var(--primary-color); }
        .submit-btn { width: 100%; padding: 12px; background-color: var(--secondary-color); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }

        /* Footer */
        footer {
            background-image: url('images/website_background.png');
            background-size: cover;
            background-position: center;
            color: #5c5555;
            padding: 60px 20px;
            text-align: center;
        }

        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .forum-container { grid-template-columns: 1fr; }
            .nav-links { display: none; }
            .thread-stats { display: none; }
        }
    </style>
</head>
<body>
    
    <!-- å¯¼èˆªæ  -->
    <header>
        <nav>
            <!-- Logo ç»“æ„æ”¹å› divï¼Œé€šè¿‡ onclick è·³è½¬ï¼Œç¡®ä¿ç»“æ„ä¸ index.html å®Œå…¨ä¸€è‡´ä»¥å¯¹é½ -->
            <div class="logo" onclick="location.href='index.html'">
                <img src="images/logo.png" alt="Stringlight Logo" class="nav-logo-img">
                String<span>light</span>
            </div>

            <ul class="nav-links">
                <li><a href="index.html#mechanical">ğŸ”§ æœºæ¢°</a></li>
                <li><a href="index.html#programming">ğŸ’» ç¼–ç¨‹</a></li>
                <li><a href="index.html#design">ğŸ¨ è®¾è®¡</a></li>
                <li><a href="community.html" class="active">ğŸ‘¥ ç¤¾åŒº</a></li>
                <li><a href="index.html#store" class="cta-btn">è´­ä¹°å¥—ä»¶</a></li>
                
                <!-- æ›¿æ¢ç™»å½•éƒ¨åˆ† -->
                <li id="loginItem"><a href="#" class="login-btn" onclick="openLoginModal()">ç™»å½•</a></li>
                
                <li id="userProfile" class="user-profile">
                    <div class="user-avatar" id="userEmailDisplay">U</div>
                    <div class="user-dropdown">
                        <a href="#" class="dropdown-item logout-btn" onclick="handleLogout()">é€€å‡ºç™»å½•</a>
                    </div>
                </li>
            </ul>

        </nav>
    </header>

    <!-- Hero åŒºåŸŸ -->
    <section class="comm-hero">
        <h1>Stringlight åˆ›å®¢ç¤¾åŒº</h1>
        <p>åŠ å…¥æˆ‘ä»¬æ´»è·ƒçš„å¼€æºæœºå™¨äººç¤¾åŒºã€‚åˆ†äº«ä½ çš„ä½œå“ï¼Œè§£å†³æ„å»ºéš¾é¢˜ï¼Œç»“è¯†å¿—åŒé“åˆçš„æœ‹å‹ã€‚</p>
        <!-- ç‚¹å‡»æ­¤æŒ‰é’®è§¦å‘å‘å¸–å¼¹çª— -->
        <button class="cta-btn" onclick="openModal('postModal')" style="font-size:1.1rem;">ç«‹å³å‘å¸– +</button>
    </section>

    <!-- è®ºå›ä¸»ä½“å†…å®¹ -->
    <div class="forum-container">
        <!-- å·¦ä¾§ä¾§è¾¹æ  -->
        <aside class="forum-sidebar">
            <div class="sidebar-title">æ¿å—åˆ†ç±»</div>
            <ul class="category-list">
                <li><a href="#" class="active">å…¨éƒ¨è®¨è®º <span class="cat-count">420</span></a></li>
                <li><a href="#">ğŸ“¢ å®˜æ–¹å…¬å‘Š <span class="cat-count">12</span></a></li>
                <li><a href="#">ğŸ†˜ ç»„è£…æ±‚åŠ© <span class="cat-count">158</span></a></li>
                <li><a href="#">ğŸ’» ç¼–ç¨‹äº¤æµ <span class="cat-count">96</span></a></li>
                <li><a href="#">ğŸ¨ ä½œå“å±•ç¤º <span class="cat-count">204</span></a></li>
                <li><a href="#">ğŸ’¡ åˆ›æ„è„‘æš´ <span class="cat-count">45</span></a></li>
            </ul>
            <br>
            <div class="sidebar-title">çƒ­é—¨æ ‡ç­¾</div>
            <div style="display:flex; flex-wrap:wrap; gap:5px;">
                <span class="thread-tag tag-official">#Arduino</span>
                <span class="thread-tag tag-official">#ESP32</span>
                <span class="thread-tag tag-official">#3Dæ‰“å°</span>
                <span class="thread-tag tag-official">#Blockly</span>
            </div>
        </aside>

        <!-- å³ä¾§å¸–å­åˆ—è¡¨ -->
        <main class="forum-main" id="threadList">
            <div class="forum-header">
                <h2 style="color:var(--secondary-color);">æœ€æ–°è®¨è®º</h2>
                <div style="font-size:0.9rem; color:#888;">
                    æ’åºï¼š<span style="color:var(--primary-color); font-weight:bold; cursor:pointer;">æœ€æ–°å›å¤</span> | <span style="cursor:pointer;">æœ€æ–°å‘å¸ƒ</span>
                </div>
            </div>

            <!-- å¸–å­ 1 -->
            <div class="thread-card">
                <div class="user-avatar-small" style="background:#ff9f43; color:white;">A</div>
                <div class="thread-info">
                    <a href="#" class="thread-title">æ±‚åŠ©ï¼šæˆ‘çš„ Stringlight èˆµæœºæ ¡å‡†åè¿˜æ˜¯èµ°è·¯æ­ªæ–œ</a>
                    <div class="thread-meta">
                        <span class="thread-tag tag-help">æ±‚åŠ©</span>
                        <span>ç”± <b>AlexMaker</b> å‘å¸ƒäº 2å°æ—¶å‰</span>
                    </div>
                </div>
                <div class="thread-stats">
                    <span class="stat-num">14</span>
                    å›å¤
                </div>
            </div>

            <!-- å¸–å­ 2 -->
            <div class="thread-card">
                <div class="user-avatar-small" style="background:#2c2c63; color:white;">S</div>
                <div class="thread-info">
                    <a href="#" class="thread-title">ã€ä½œå“ã€‘æˆ‘ç»™ Stringlight åŠ ä¸Šäº†é’¢é“ä¾ çš„é…è‰²å’Œè¯­éŸ³åŒ…ï¼</a>
                    <div class="thread-meta">
                        <span class="thread-tag tag-showcase">å±•ç¤º</span>
                        <span>ç”± <b>SuperFan</b> å‘å¸ƒäº 5å°æ—¶å‰</span>
                    </div>
                </div>
                <div class="thread-stats">
                    <span class="stat-num">328</span>
                    ç‚¹èµ
                </div>
            </div>

            <!-- å¸–å­ 3 -->
            <div class="thread-card">
                <div class="user-avatar-small" style="background:#33db00; color:white;">O</div>
                <div class="thread-info">
                    <a href="#" class="thread-title">å®˜æ–¹æ•™ç¨‹æ›´æ–°ï¼šå¦‚ä½•ä½¿ç”¨ Python æ§åˆ¶ LED çŸ©é˜µè¡¨æƒ…</a>
                    <div class="thread-meta">
                        <span class="thread-tag tag-official">ç½®é¡¶</span>
                        <span>ç”± <b>Stringlightå®˜æ–¹</b> å‘å¸ƒäº æ˜¨å¤©</span>
                    </div>
                </div>
                <div class="thread-stats">
                    <span class="stat-num">56</span>
                    å›å¤
                </div>
            </div>

            <!-- å¸–å­ 4 -->
            <div class="thread-card">
                <div class="user-avatar-small">U</div>
                <div class="thread-info">
                    <a href="#" class="thread-title">æœ‰æ²¡æœ‰äººè¯•è¿‡ç”¨æ ‘è“æ´¾ Pico æ›¿æ¢ä¸»æ§æ¿ï¼Ÿ</a>
                    <div class="thread-meta">
                        <span class="thread-tag tag-help">è®¨è®º</span>
                        <span>ç”± <b>User889</b> å‘å¸ƒäº 2å¤©å‰</span>
                    </div>
                </div>
                <div class="thread-stats">
                    <span class="stat-num">8</span>
                    å›å¤
                </div>
            </div>

            <div style="text-align:center; margin-top:30px;">
                <button style="padding:10px 30px; background:white; border:1px solid #ccc; border-radius:20px; cursor:pointer;">åŠ è½½æ›´å¤š...</button>
            </div>
        </main>
    </div>

    <!-- å…¨çƒè¿åŠ¨åŒºåŸŸ -->
    <section class="global-section">
        <h2>ğŸŒ å±äºå…¨çƒåˆ›å®¢çš„è¿åŠ¨</h2>
        <p style="max-width:600px; margin:0 auto 30px; color:#666;">
            æ— è®ºä½ åœ¨å­¦æ ¡ã€åˆ›å®¢ç©ºé—´è¿˜æ˜¯å®¶é‡Œçš„è½¦åº“ï¼ŒStringlight éƒ½èƒ½å¸¦ä½ è¿›å…¥æœºå™¨äººä¸–ç•Œã€‚
            æˆ‘ä»¬ç›¸ä¿¡å¼€æºçš„åŠ›é‡ï¼Œåˆ†äº«è®©çŸ¥è¯†æ›´æœ‰ä»·å€¼ã€‚
        </p>
        <div style="height:300px; background:#f0f2f5; border-radius:20px; display:flex; align-items:center; justify-content:center; color:#aaa; font-size:1.5rem; max-width:800px; margin:0 auto;">
            [ ä¸–ç•Œåœ°å›¾ - å…¨çƒç‚¹äº® Stringlight ]
        </div>
    </section>

    <!-- 1. ç™»å½•å¼¹çª— -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('loginModal')">&times;</span>
            <h2 style="text-align:center; margin-bottom:20px; color:var(--secondary-color);">ç™»å½•ç¤¾åŒºè´¦å·</h2>
            <form onsubmit="event.preventDefault(); closeModal('loginModal'); alert('ç™»å½•æˆåŠŸï¼');">
                <div class="form-group">
                    <label>ç”µå­é‚®ç®±</label>
                    <input type="email" required>
                </div>
                <div class="form-group">
                    <label>å¯†ç </label>
                    <input type="password" required>
                </div>
                <button type="submit" class="submit-btn">ç™»å½• / æ³¨å†Œ</button>
            </form>
        </div>
    </div>

    <!-- 2. å‘å¸–å¼¹çª— (æ–°å¢) -->
    <div id="postModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('postModal')">&times;</span>
            <h2 style="text-align:center; margin-bottom:20px; color:var(--secondary-color);">å‘å¸ƒæ–°è®¨è®º</h2>
            <form id="postForm" onsubmit="handleNewPost(event)">
                <div class="form-group">
                    <label>æ ‡é¢˜</label>
                    <input type="text" id="postTitle" placeholder="è¯·ç®€è¦æè¿°ä½ çš„é—®é¢˜æˆ–åˆ†äº«..." required>
                </div>
                <div class="form-group">
                    <label>åˆ†ç±»æ ‡ç­¾</label>
                    <select id="postTag">
                        <option value="help">ğŸ†˜ æ±‚åŠ©</option>
                        <option value="showcase">ğŸ¨ ä½œå“å±•ç¤º</option>
                        <option value="discuss">ğŸ’¡ è®¨è®º</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>å†…å®¹</label>
                    <textarea id="postContent" placeholder="åœ¨è¿™é‡Œè¯¦ç»†æè¿°..." required></textarea>
                </div>
                <button type="submit" class="submit-btn">ç«‹å³å‘å¸ƒ</button>
            </form>
        </div>
    </div>

    <!-- é¡µè„š -->
    <footer>
        <div class="container" style="max-width:1200px; margin:0 auto;">
            <div class="logo" style="justify-content: center; margin-bottom: 20px;">String<span>light</span></div>
            <div style="display: flex; justify-content: center; gap: 20px; font-size: 24px;">
                <a href="#">ğŸ“±</a>
                <a href="#">ğŸ“º</a>
                <a href="#">ğŸ“·</a>
                <a href="#">ğŸ¦</a>
            </div>
            <p>&copy; 2025 Stringlight DIY. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // é€šç”¨ï¼šæ‰“å¼€å¼¹çª—
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        // é€šç”¨ï¼šå…³é—­å¼¹çª—
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // é€šç”¨ï¼šç‚¹å‡»é®ç½©å±‚å…³é—­
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = "none";
            }
        }

        // --- æ ¸å¿ƒé€»è¾‘ï¼šå¤„ç†å‘å¸– ---
        function handleNewPost(event) {
            event.preventDefault(); // é˜»æ­¢è¡¨å•åˆ·æ–°é¡µé¢

            // 1. è·å–ç”¨æˆ·è¾“å…¥
            const title = document.getElementById('postTitle').value;
            const tagValue = document.getElementById('postTag').value;
            
            // 2. æ ¹æ®é€‰æ‹©çš„æ ‡ç­¾è®¾ç½®æ˜¾ç¤ºæ ·å¼å’Œæ–‡å­—
            let tagClass = 'tag-new';
            let tagName = 'æ–°å¸–';
            if (tagValue === 'help') { tagClass = 'tag-help'; tagName = 'æ±‚åŠ©'; }
            if (tagValue === 'showcase') { tagClass = 'tag-showcase'; tagName = 'å±•ç¤º'; }
            if (tagValue === 'discuss') { tagClass = 'tag-official'; tagName = 'è®¨è®º'; }

            // 3. åˆ›å»ºå¸–å­çš„ HTML ç»“æ„
            const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16);
            
            const newPostHTML = `
                <div class="thread-card" style="border-left: 5px solid var(--accent-green);">
                    <div class="user-avatar-small" style="background:${randomColor}; color:white;">Me</div>
                    <div class="thread-info">
                        <a href="#" class="thread-title">${title}</a>
                        <div class="thread-meta">
                            <span class="thread-tag ${tagClass}">${tagName}</span>
                            <span>ç”± <b>æˆ‘</b> å‘å¸ƒäº åˆšåˆš</span>
                        </div>
                    </div>
                    <div class="thread-stats">
                        <span class="stat-num">0</span>
                        å›å¤
                    </div>
                </div>
            `;

            // 4. å°†æ–°å¸–å­æ’å…¥åˆ°åˆ—è¡¨çš„æœ€å‰é¢
            const forumMain = document.getElementById('threadList');
            const firstPost = forumMain.querySelector('.thread-card');
            
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = newPostHTML;
            const newPostElement = tempDiv.firstElementChild;

            forumMain.insertBefore(newPostElement, firstPost);

            // 5. é‡ç½®è¡¨å•å¹¶å…³é—­å¼¹çª—
            document.getElementById('postForm').reset();
            closeModal('postModal');

            // 6. ç»™ä¸ªåé¦ˆ
            alert('å‘å¸ƒæˆåŠŸï¼å¿«å»çœ‹çœ‹ä½ çš„æ–°å¸–å­å§ã€‚');
        }
    </script>
    <script src="js/auth.js"></script>
</body>
</html>